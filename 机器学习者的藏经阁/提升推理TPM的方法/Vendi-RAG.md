# 什么是Vendi-RAG？——专为多跳问答设计的检索增强生成框架
RAG（检索增强生成）是一种结合“信息检索”和“语言生成”的AI技术：先从知识库中找到与问题相关的信息，再用大语言模型基于这些信息生成答案，核心目的是解决大模型“记不住、答不准”的问题。而Vendi-RAG是一款专门优化“多跳问答”任务的RAG框架——所谓“多跳问答”，就是需要关联多个知识点才能回答的问题（比如“某作家的代表作改编过哪些电影，这些电影的导演是谁”）。


## Vendi-RAG的核心特点
1.  **兼顾检索多样性与答案质量**：传统RAG容易检索到重复或片面的信息，Vendi-RAG则同时优化“信息多样性”（避免漏关键知识点）和“答案准确性”（确保信息有用）。
2.  **用Vendi Score（VS）衡量多样性**：VS是专门的多样性指标，能量化检索到的文档之间的差异度，避免反复获取同类信息。
3.  **靠大语言模型评判答案好坏**：内置“LLM评判器”（如基于GPT、文心一言等模型），自动判断候选答案是否准确、完整。
4.  **动态调整“相关”与“多样”的平衡**：根据问题复杂度实时调整策略——简单问题侧重相关性，复杂多跳问题则侧重多样性以覆盖更多知识点。


## 工作原理（通俗版）
Vendi-RAG通过“多轮迭代优化”找到最佳答案，步骤如下：
1.  **初步检索**：根据用户问题，从知识库中先找出一批相关文档。
2.  **多样性评估**：用VS打分，判断这些文档是否足够多样（比如问“乔布斯的两家公司”，若只检索到苹果的文档，多样性就不够）。
3.  **答案质量评判**：LLM评判器基于当前文档生成候选答案，评估是否回答了所有问题点。
4.  **调整检索策略**：若多样性不足，就扩大检索范围或更换关键词；若答案不准，就优先补充更相关的文档。
5.  **循环优化**：重复前4步，直到VS和答案质量都达标（迭代次数会自动控制，避免无效循环）。


## 实际应用举例
以用户问题“苹果公司的创始人是谁，他还创立了哪家著名公司？”为例（典型多跳问题，需两步关联）：
1.  第一轮：检索“苹果公司创始人”，得到“史蒂夫·乔布斯”等信息。
2.  第二轮：用VS发现当前信息只涉及“苹果”，多样性不足，于是补充检索“史蒂夫·乔布斯 创立的其他公司”。
3.  LLM评判器确认新检索到的“皮克斯动画工作室”“NeXT公司”符合要求，最终生成答案：“苹果公司的核心创始人之一是史蒂夫·乔布斯，他还创立了皮克斯动画工作室和NeXT公司。”


## 简单Python代码示例（附使用前提）
```python
# 先通过命令安装依赖：pip install vendi-rag
from vendi_rag import VendiRAG

# 初始化Vendi-RAG框架
vendi_rag = VendiRAG()

# 输入多跳问题
user_query = "苹果公司的创始人是谁，他还创立了哪家著名公司？"

# 自动执行多轮检索+答案生成
result = vendi_rag.answer_multi_hop_query(user_query)

# 输出最终答案
print(result)
```


## 性能优势（基于权威数据集测试）
Vendi-RAG在国际公认的多跳问答评测数据集上，表现显著优于传统RAG：
-  **HotpotQA**：准确率提升4.2%（该数据集侧重“事实关联型”多跳问题）
-  **2WikiMultiHopQA**：准确率提升4.1%（侧重“跨知识库”多跳问题）
-  **MuSiQue**：准确率提升1.3%（侧重“复杂逻辑型”多跳问题）

核心原因是它解决了传统RAG的痛点——传统方法常因检索到的信息“重复、片面”，导致多跳问题回答不完整，而Vendi-RAG通过多样性优化覆盖了更多关键知识点。


## 总结
Vendi-RAG是针对“多跳问答”的专用RAG方案，通过“多样性评估+LLM评判+动态调整”的组合，既能处理需要多步推理的复杂问题（如智能客服解答“售后流程+退款时效”类咨询），也能高效响应简单问题。目前已在知识库问答、智能检索、学术问答等场景中展现出实用价值。