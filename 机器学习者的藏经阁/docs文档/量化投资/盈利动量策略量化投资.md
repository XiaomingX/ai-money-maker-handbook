# 盈利动量策略：跟着上涨趋势赚钱的量化投资法
盈利动量策略，简单说就是**买过去一段时间涨得好的股票，赌它们未来还能接着涨**。这个策略的核心逻辑是“强者恒强”——过去表现强势的股票，未来大概率会继续保持强势。它是A股市场中常用的量化投资策略之一，尤其适合趋势明确的行情。


### 一、核心概念：搞懂这两个词就入门
1.  **动量**：不是物理学的“动量”，而是指股票在一段时间内的上涨“劲头”，比如过去20天涨了15%，这个“15%”就是它的动量（正数代表上涨，负数代表下跌）。  
2.  **均线**：股票一段时间内的平均价格，是判断趋势的核心工具。  
    - 短期均线（如5日、10日均线）：反映最近几天的价格走势，变化快；  
    - 长期均线（如20日、60日均线）：反映几个月的大趋势，更稳定。  
    - 均线“金叉”“死叉”：短期均线上穿长期均线叫“金叉”，通常是上涨信号；短期均线下穿长期均线叫“死叉”，通常是下跌信号——这是动量策略最常用的买卖依据之一。


### 二、策略实操四步走：从数据到交易
#### 1. 数据准备：找对数据是前提
- **数据源**：普通投资者可直接用国内量化平台（如聚宽、同花顺iFinD、通达信量化接口）获取A股历史价格数据（开盘价、收盘价、成交量等），不用自己爬取；  
- **数据清洗**：平台一般会自动处理“停牌数据”“除权除息”等干扰项，重点关注“复权后价格”（更真实反映实际收益）。

#### 2. 趋势识别：用指标判断“谁在涨”
这一步是核心，通过两个指标筛选出有“动量”的股票：  
- **计算动量指标**：常用“过去20日涨跌幅”，公式为：  
  `动量 = (今日收盘价 - 20天前收盘价) / 20天前收盘价 × 100%`  
  比如某股票20天前收盘价10元，今日12元，动量就是20%，属于强势股。  
- **用均线确认趋势**：光有动量还不够，需用均线验证趋势是否扎实。比如选“5日均线上穿20日均线（金叉）”且“过去20日动量>10%”的股票，双重确认上涨趋势。

#### 3. 交易执行：明确“何时买、何时卖”
- **买入信号**：同时满足两个条件时买入：① 动量指标大于设定阈值（如10%）；② 出现均线金叉。  
- **卖出信号**：满足任一条件时卖出：① 动量指标转负（或小于-5%）；② 出现均线死叉。  
- **止损止盈**：必须加的“安全垫”，比如：  
  - 止损：买入后若下跌5%就卖出（避免亏更多）；  
  - 止盈：买入后若上涨10%就卖出（落袋为安）。

#### 4. 风险管理：别把鸡蛋放一个篮子里
- **仓位控制**：单只股票的买入金额不超过总资金的5%-10%，比如10万本金，单只最多买1万，避免一只股票暴跌亏光；  
- **动态止损**：如果股票涨了20%，可以把止损位从“下跌5%”调到“下跌10%”，既锁定收益，又给趋势留空间。


### 三、实战案例：用Python在聚宽平台跑策略（A股版）
以“贵州茅台（600519）”为例，用5日/20日均线金叉死叉+止损止盈做策略，代码可直接在聚宽平台运行：
```python
# 导入聚宽函数库（国内常用量化平台）
from jqdata import *

# 初始化：设定基准、股票池、均线周期
def initialize(context):
    set_benchmark('000300.XSHG')  # 以沪深300为业绩对比基准
    set_option('use_real_price', True)  # 用真实复权价格计算
    g.stock = '600519.XSHG'  # 目标股票：贵州茅台
    g.short_ma = 5  # 短期均线：5日
    g.long_ma = 20  # 长期均线：20日
    g.stop_loss = 0.05  # 止损比例：5%
    g.take_profit = 0.1  # 止盈比例：10%

# 开盘前计算均线（每天只算一次，节省资源）
def before_market_open(context):
    # 获取茅台过去21天的收盘价（算20日均线需要20个数据）
    close_data = attribute_history(g.stock, g.long_ma + 1, '1d', ['close'], skip_paused=True)
    if len(close_data) < g.long_ma + 1:
        return  # 数据不够时不操作
    # 计算5日和20日均线值
    g.ma5 = close_data['close'][-g.short_ma:].mean()
    g.ma20 = close_data['close'][-g.long_ma:].mean()

# 盘中执行交易
def handle_data(context, data):
    current_price = data[g.stock].close  # 当前股价
    # 查持仓成本：如果没持仓，成本为0
    cost = context.portfolio.positions[g.stock].avg_cost if g.stock in context.portfolio.positions else 0
    
    # 1. 金叉且无持仓：全仓买入（演示用，实际建议分仓）
    if g.ma5 > g.ma20 and g.stock not in context.portfolio.positions:
        order_value(g.stock, context.portfolio.available_cash)  # 用全部可用资金买
        log.info(f"金叉出现，买入茅台，价格：{current_price:.2f}元")
    
    # 2. 死叉且有持仓：全仓卖出
    elif g.ma5 < g.ma20 and g.stock in context.portfolio.positions:
        order_target(g.stock, 0)  # 持仓清为0
        log.info(f"死叉出现，卖出茅台，价格：{current_price:.2f}元")
    
    # 3. 触发止损：股价比成本跌了5%
    elif cost > 0 and current_price < cost * (1 - g.stop_loss):
        order_target(g.stock, 0)
        log.info(f"触发止损，卖出茅台，价格：{current_price:.2f}元")
    
    # 4. 触发止盈：股价比成本涨了10%
    elif cost > 0 and current_price > cost * (1 + g.take_profit):
        order_target(g.stock, 0)
        log.info(f"触发止盈，卖出茅台，价格：{current_price:.2f}元")
```

**代码关键说明**：  
- 聚宽是国内散户常用的免费量化平台，直接复制代码即可回测（测过去几年的收益）；  
- 案例中“全仓买入”仅为演示，实际投资建议分3-5只股票分散风险；  
- 真实交易需加“手续费计算”（A股佣金约0.02%-0.03%，印花税0.1%），否则回测收益会虚高。


### 四、策略优化：怎么让收益更稳？
#### 1. 优化参数：别死盯5/20日均线
不同行情适合不同参数，可回测对比：  
- 震荡行情：用短周期（如3日/10日），反应更快；  
- 牛市行情：用长周期（如10日/30日），避免被短期波动洗出去；  
- 止损止盈：波动大的股票（如科技股）可设8%止损、15%止盈；蓝筹股可设5%止损、10%止盈。

#### 2. 筛选股票：不只看“涨得快”，还要看“涨得稳”
- **选强势股**：从沪深300或中证500里，选“过去20日涨跌幅前20%”的股票，避开小盘垃圾股；  
- **加基本面过滤**：只选“市盈率<30倍、净利润连续3年增长”的股票——避免买涨得快但业绩差的“妖股”，降低暴雷风险。

#### 3. 组合投资：多买几只，分散风险
比如选5只“动量达标+基本面好”的股票，每只买20%仓位，比单买1只更稳。定期（如每月）调仓：把跌出前20%的股票卖掉，换成新的强势股。


### 五、风险提示：这些坑一定要避开
1.  **趋势反转风险**：动量策略最怕“涨不动了”——比如股票连续涨了3个月，突然出现大跌，金叉可能失效，容易高位套牢；  
2.  **震荡市失效**：在横盘震荡的市场（如2023年多数时间的A股），金叉死叉会频繁出现，导致频繁交易，手续费亏不少；  
3.  **参数“过拟合”**：比如回测时发现“7日/23日均线”收益最高，但实际用的时候可能完全不准——因为这个参数是“适配历史数据”的，不是真的有效；  
4.  **交易成本高**：A股频繁交易的手续费（佣金+印花税）会吃掉不少收益，建议调仓频率别超过每月1次。


### 结论
盈利动量策略是适合A股散户的“简单量化工具”，核心是“跟着趋势走、做好止损”。但它不是“稳赚不赔”的神器——行情好时能跑赢大盘，行情差时也会亏。实际用的时候，一定要结合基本面筛选股票、控制仓位，并且多回测、少追高。记住：量化投资是“赚概率的钱”，不是“一夜暴富的捷径”。